AmbientImpact.on(["jquery","link.file"],function(n,i){AmbientImpact.addComponent("link.image",function(m,o){"use strict";this.extensions=["jpg","jpeg","png","gif","svg"],this.elements=["img","picture","svg:not(.material-ripple)","canvas"],this.notWrapInElements=["svg"],this.imageDestinationLinkClass="ambientimpact-is-image-link",this.imageLinkClass="ambientimpact-link-has-image",this.imageLinkTextClass="ambientimpact-link-has-image__text",this.isImageDestinationLink=function(n){return i.isFileDestinationLink(n,{extensions:m.extensions})},this.isImageContainingLink=function(n){return!!o(n).has(this.elements.join()).length},o.fn.extend({wrapImageLinkText:function(){return m.isImageContainingLink(this)&&o(this).find("*").addBack().contents().textNodes().filter(function(){return o(this).parents("."+m.imageLinkTextClass).length<1&&o(this).parents(m.notWrapInElements.join(",")).length<1}).wrap('<span class="'+m.imageLinkTextClass+'"></span>'),this},unwrapImageLinkText:function(){return this.find("."+m.imageLinkTextClass).contents().unwrap()}}),this.addBehaviors({AmbientImpactImageLink:{attach:function(n,i){for(var t=o("a",n),a=t.length-1;0<=a;a--)m.isImageDestinationLink(t[a])&&o(t[a]).addClass(m.imageDestinationLinkClass),m.isImageContainingLink(t[a])&&o(t[a]).addClass(m.imageLinkClass)},detach:function(n,i,t){"unload"===t&&(o("a."+m.imageDestinationLinkClass,n).removeClass(m.imageDestinationLinkClass),o("a."+m.imageLinkClass,n).removeClass(m.imageLinkClass))}}}),AmbientImpact.on("link.external",function(s){m.addBehaviors({AmbientImpactImageLinkExternal:{attach:function(n,i){for(var t=o("a",n),a=t.length-1;0<=a;a--)m.isImageDestinationLink(t[a])&&s.makeLinkExternal(t[a])},detach:function(n,i,t){if("unload"===t)for(var a=o("a",n),e=a.length-1;0<=e;e--)m.isImageDestinationLink(a[e])&&s.detachFromLink(a[e])}}})})})});