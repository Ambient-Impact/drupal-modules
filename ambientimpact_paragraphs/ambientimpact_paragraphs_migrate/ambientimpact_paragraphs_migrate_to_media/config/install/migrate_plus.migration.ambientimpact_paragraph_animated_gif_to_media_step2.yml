# This migration links the newly created media entities with entity reference
# fields on the target bundle. Note that the singular 'gif' is used in this
# migration name as this file name just hits Windows' file name character limit.

id: ambientimpact_paragraph_animated_gif_to_media_step2
label: 'Ambient.Impact Paragraph items (Animated GIFs bundle) files to media mapping'
migration_group: d8_ambientimpact_paragraphs_migrate_to_media
source:
  plugin: content_entity:paragraph
  bundle: animated_gifs
  include_translations: false

destination:
  plugin: entity:paragraph

process:
  id: id

  type:
    plugin: default_value
    default_value: animated_gifs

  field_animated_gifs:
    plugin: file_id_lookup
    source: field_animated_gifs_migrated
    migration: ambientimpact_paragraph_animated_gif_to_media_step1
    no_stub: true

migration_dependencies:
  optional:
  - ambientimpact_paragraph_animated_gif_to_media_step1

dependencies:
  enforced:
    module:
      - ambientimpact_paragraphs_migrate_to_media
